zm.install("emotions",{renderEmotions:function(a){for(var c=0;c<this.size();c++){var b=zm(this[c]).html();b=zm.renderEmotions(b,a);zm(this[c]).html(b)}return this},attachEmoButtons:function(d,a){if(!zm.plugins.emotions.initialized){zm.plugins.emotions.init();zm.plugins.emotions.initialized=true}for(var c=0;c<this.size();c++){if(!zm.data(this[c],"emotions.attached")){a&&zm("#"+(d||"")+this[c].getAttribute("rel").substr(4)).data("emotions.options",a);zm(this[c]).click(function(){var h=this,i=zm("#zme-emotion-box"),f=h.getAttribute("rel"),g=zm("#"+(d||"")+(f&&f.substr(4)))[0];zm.plugins.emotions.button=h;if(!g||g.disabled){return true}if(zm.plugins.emotions.currentEditor===null||zm.plugins.emotions.currentEditor!=g){zm.plugins.emotions.show=false}zm.plugins.emotions.currentEditor=g;i.find(".emot-wpr").show();if(a&&a.hideSticker){i.find(".emot-wpr.wpr-emotion").find("a").addClass("current");i.find(".emot-wpr.wpr-sticker").hide().find("a").removeClass("current");i.find(".tab_sticker").hide();i.find(".tab_emotion").show()}if(zm.plugins.emotions.show){zm.plugins.emotions.show=false;i.hide()}else{if(a&&zm.isFunction(a.beforeShow)){a.beforeShow.call(i,i)}zm.plugins.emotions.show=true;i.show();zm.plugins.emotions.setPosition(h,a)}return true}).attr("tabIndex",0);var b=this[c];if(a){a.windowScroll&&zm(window).scroll(function(){zm.plugins.emotions.setPosition(b,a)});a.windowResize&&zm(window).resize(function(){zm.plugins.emotions.setPosition(b,a)});a.cssPosition&&zm.data(b,"emotions.position",a.cssPosition);a.offset&&zm.data(b,"emotions.offset",a.offset)}zm.data(b,"emotions.attached",true)}}zm("#zme-emotion-box").clickOutsideWith(this)}},function(){zm.extend(zmCore,{renderEmotions:function(m,a){if(!zm.plugins.emotions.initialized){zm.plugins.emotions.init();zm.plugins.emotions.initialized=true}var h=zm.plugins.emotions.cached,u=a&&a.preventEntities||false,o=a&&a.preventLink||false,n=a&&a.maxNumber||false,r=0,i,f,v,b,s,k=a&&a.stickerType||0,g=new RegExp("\\[e\\](\\d+)\\[\\/e\\]","gi"),l=new RegExp("\\[t=(\\d+)\\]([^\\[]*)\\[\\/t\\]","gi");function t(c){return c.replace(new RegExp("(\\S*)("+p[q].code+")","gi"),function(w,e,d){if((u&&/&amp|&lt|&gt/.test(e)&&d.indexOf(";")==0)||(o&&/http:\/\/.*/.test(e))){return w}else{var x=t(e);if(n){if(r>=n){return x+d}r++}return x+p[q].src}})}var p=h["emotion.1"];for(var q in p){if(u||o){m=t(m)}else{m=m.replace(new RegExp(p[q].code,"gi"),function(){return n&&++r>n?p[q].code:p[q].src})}}r=0;b=g.exec(m);while(b){for(var j in h){if(j.indexOf("emotion.")!=-1){i="e"+b[1];v=h[j][i]?h[j][i]:null;if(v){m=m.replace(new RegExp("\\[e\\]"+b[1]+"\\[\\/e\\]","gi"),function(){return n&&++r>n?v.code:v.src});break}}}b=g.exec(m)}r=0;for(var j in h){if(j.indexOf("sticker.")!=-1){m=m.replace(l,function(e,d,c){i="s"+d;v=h[j][i]?h[j][i]:null;if(v){if(++r>3){return e}else{if(k==2){return'[<a onmouseout="zm.plugins.emotions.ho()" onmouseover="zm.plugins.emotions.hi(this)" class="sticker_item_link" alt="'+v.ourl+'" >'+c+"</a>]<br/>"+v.src}else{if(k==1){return'<img class="zmpstk" alt="" title="'+v.desc+'" src="'+v.url+'" />'}else{return'[<a onmouseout="zm.plugins.emotions.ho()" onmouseover="zm.plugins.emotions.hi(this)" class="sticker_item_link" alt="'+v.ourl+'" >'+c+"</a>]"}}}}return e})}}return m}});zm.emoSetCat=function(b,a){zm(".tabemotion li a").removeClass("current");zm(".tabemotion li.wpr-"+b+" a").addClass("current");zm(".tabemoctn").hide();zm(".tab_"+b).show();zm(".tab_"+b+" .catemotion li").each(function(){var c=zm(this).find("a").attr("rel");if(c==a){zm(this).find("a").click();return}})};zm.plugins.emotions.close=function(){zm("#zme-emotion-box").hide();zm.plugins.emotions.show=false;zm.plugins.emotions.currentEditor=null};zm.plugins.emotions.setPosition=function(c,s,r){var f=zm(c),m=zm.getViewport(),j=zm(r?r:"#zme-emotion-box");if(s&&zm.isFunction(s.position)){s.position.call(j,f)}else{var b=f.offset(true),p=j.outerWidth(),i=j.outerHeight(),q=b.top+f.outerHeight()+10,e=b.left-p+f.outerWidth()+8,a=f.data("emotions.position")||"absolute",h=f.data("emotions.offset")||90,n=j.find(".arrow_emo"),g=j.find(".arrow_emobot"),k,d;n.hide();g.hide();k=n;e=parseInt(h)>0?e+h:e;e=e<0?30:e;e=(e+p)>(m.offsetX+m.width)?m.offsetX+m.width-p-30:e;if((b.top+i+30>m.offsetY+m.height)&&m.height>i){q=b.top-i-5;k=g}if(a=="fixed"){e-=m.offsetX;q-=m.offsetY}j.css({left:e+"px",top:q+"px",position:a});d=f.offset(true).left-e+3;k.show().css({left:d+"px"})}};zm.plugins.emotions.hi=function(g){var b=zm(g),e=zm("#zme-sticker-box"),d=e.find("#emoarrowtop"),f=e.find("#emoarrowbot"),c=new Image(),a;d.hide();f.hide();a=zm(g).attr("alt");a=a.replace("full_","big_");c.src="http://emo.me.zdn.vn/sticker/"+a;c.onload=function(){e.find(".zme-sticker-ctn").html("").append(c);e.show();var j=zm.getViewport(),p=b.offset(true),k=e.outerWidth(),n=e.outerHeight(),m=p.top-n-8,i=p.left-(k-b.outerWidth())/2,h=k/2-7;if(m-25<j.offsetY){m=p.top+b.outerHeight()+10;f=d}e.css({left:i+"px",top:m+"px"}).show();f.css({left:h+"px"}).show()}};zm.plugins.emotions.ho=function(){zm("#zme-sticker-box").hide().css({top:"-9999px;"})};zm.plugins.emotions.hoverSticker=function(a){a=a?"#"+a+" ":"";zm(a+".sticker_item_link").hover(function(){zm.plugins.emotions.hi(this)},function(){zm.plugins.emotions.ho()});zm(window).scroll(function(){zm.plugins.emotions.ho()})};zm.plugins.emotions.init=function(){function c(g,m){if(!g){return}var n=zm("#zme-emotion-box .tab_"+m+" .catemotion");for(var k=0;k<g.length;k++){var l=g[k],j=zm.createElement("LI"),h='<a class="'+(k==0?"current":"")+'" rel="'+l.id+'" href="#">'+l.name+"</a>";zm(j).html(h);k==g.length-1&&zm(j).addClass("end");n.append(j)}n.find("a").click(function(p){if(zm(this).hasClass("current")){return false}n.find("a").removeClass("current");zm(this).addClass("current");var q=zm(this).attr("rel"),i=zm.plugins.emotions.cached;if(i[m+"."+q]){var o=i[m+"."+q];if(m=="sticker"){e(o)}else{b(o,q)}}return false})}function b(k,t){var l,u,o=0,r=t==3?65:24,m=t==3?31:24,n="",q=zm("#zme-emotion-box .tab_emotion .itememotion"),p=new zm.ScrollableUI({width:420,height:176});q.html("");q.append(p.getElement());for(l in k){u=k[l];n+='<li><img name="'+u.sign+'" width="'+r+'" height="'+m+'" alt="'+u.id+'" title="'+u.desc+'" src="https://stc-id.zing.vn/idzing/theme/default/css/images/blank.gif" style="background:url('+u.url+') no-repeat 50% 50%"></li>';if(o==0){var g=zm("#zme-emotion-box .tab_emotion .catemotion li a.current").attr("rel"),j=u.src;if(g==1){j+=' <span class="code_emo">'+u.code+"</span> "}j+='<span class="exp_emo">'+u.desc+'</span><div class="clr"></div>';zm("#zme-emotion-box .tab_emotion .rowexplain_emo").html(j)}o++}p.setContent(n);f("emotion");if(t==3){}}function e(j){var k,r,q=55,l=55,n=0,m="",p=zm("#zme-emotion-box .tab_sticker .itemsticker"),o=new zm.ScrollableUI({width:420,height:176});p.html("");p.append(o.getElement());for(k in j){r=j[k];m+='<li><img name="'+r.code+'" width="'+q+'" height="'+l+'" alt="'+r.code+'" title="'+r.desc+'" src="https://stc-id.zing.vn/idzing/theme/default/css/images/blank.gif" style="background:url('+r.url+') no-repeat 50% 50%"></li>';if(n==0){var g='<span class="explainfl"><span class="exp_emo">'+r.desc+'</span></span>							<div class="clr"></div>';zm("#zme-emotion-box .tab_sticker .rowexplain_emo").html(g)}n++}o.setContent(m);f("sticker")}function f(g){zm(".item"+g+" li img").click(function(u){setTimeout("zm('#zme-emotion-box').hide();",100);zm.plugins.emotions.show=false;var o=zm.plugins.emotions.currentEditor;if(o!=null){var q=this,h;if(q.tagName=="IMG"){h=q.src}zm.plugins.emotions.showingEmots=false;try{var j=zm(o),x=zm.data(o,"emotions.options");if(j.css("display")!="none"||x.force){var w=x&&x.insert,l=zm(q),i=0,r=l.attr("title");if(g=="sticker"){var v=l.attr("name");r="[t="+v+"]"+r+"[/t]"}else{r=l.attr("name")}r+=" ";if(j.val()){var n="\\[t=(\\d+)\\]([^\\[]*)\\[\\/t\\]",k=j.val(),t=new RegExp(n,"g"),m=k.match(t);i=m?m.length:0}if(i<3||g!="sticker"){if(zm.isFunction(w)){w.call(o,r,h)}else{var s=x&&x.beforeInsert,p=true;if(zm.isFunction(s)){p=s.call(o,r,h)}p!==false&&j.insertAtCaret(r)}a(l,g)}else{zm.Boxy.alert("Bạn chỉ được thêm tối đa 3 hình động","Thông báo",5000)}}}catch(q){}zm.plugins.emotions.currentEditor=null}}).hover(function(){var l=zm("#zme-emotion-box .tab_"+g+" .rowexplain_emo"),i=zm(this);if(g=="sticker"){l.find(".exp_emo").html(i.attr("title"))}else{var m,h,k,j;m=zm("#zme-emotion-box .tab_"+g+" .catemotion li a.current").attr("rel");h=i.attr("name");k=i.attr("title");j=i.css("background-image").replace("url(","").replace(")","").replace(/[\'\"]/g,"");l.find(".code_emo").html(h);l.find(".exp_emo").html(k);l.find("img").attr({src:j,title:k});m!=1&&l.find(".code_emo").hide()}},function(){})}function a(l,h){var q,o=1,m=false,g=l.attr("alt"),r="emofav."+zmConfig.viewerId+"."+h,p=zm(".tab_"+h+" .catemotion li a.current").attr("rel"),j=h=="sticker"?"s":"e",u=zm.plugins.emotions.cached[h+"."+p][j+g],k=h=="sticker"?21:90;if(p==3&&h!="sticker"){return}h=h=="sticker"?h:"emo";q=zm.storage.get(r,true);q=!q?new Array():q;for(var n=0;n<q.length;n++){if(q[n].id==g){q[n].count++;m=true;break}}if(!m){var t={id:g,desc:u.desc,url:u.ourl,count:o};if(h!="sticker"){t.sign=l.attr("name")}q.unshift(t)}q.sort(d);if(q.length>k){q.splice(k,q.length-k)}zm.storage.put(r,q,0,true)}function d(h,g){return h.count>=g.count?-1:1}zm.ready(function(){var o='<div class="bxemotion boxshadow_popup" id="zme-emotion-box" style="display: none;">							<div class="popup_edge_shadow">								<span class="skin arrow_emo"></span>								<div class="popup_border" id="zme-emotion-content">									<a id="emotionclose" class="disboxclose" style="" title="Đóng" href="#">Đóng</a>									<div class="ctnemotion">										<ul class="tabemotion">											<li class="emot-wpr wpr-emotion"><a href="#" rel="emotion">Biểu cảm</a></li>											<li class="emot-wpr wpr-sticker"><a href="#" rel="sticker" class="current">Hình động</a></li>										</ul>										<div class="tab_emotion tabemoctn" style="display:none;">											<ul class="catemotion"></ul>											<ul class="itememotion"></ul>											<div class="rowexplain_emo">												<span class="code_emo"></span>												<span class="exp_emo"></span>											</div>										</div>										<div class="tab_sticker tabemoctn">											<ul class="catemotion"></ul>											<ul class="itemsticker"></ul>											<div class="rowexplain_emo sticker">												<span class="explainfl">													<span class="exp_emo"></span>												</span>											</div>										</div>									</div>								</div>								<span class="skin arrow_emobot" style="display:none;"></span>							</div>							<div class="notif_boxshadow" style="">								<div class="ntifboxshd_right png" style="float:right"></div>								<div class="ntifboxshd_left png" style="float:left"></div>								<div class="ntifboxshd_center"></div>							</div>						</div>';zm("body").append(o);if(typeof emoticonV2!="undefined"){var m,B,w=new Array(),k=emoticonV2.emo,q=emoticonV2.sticker,C=new Array(),p=new Array();var h=zm.storage.get("emofav."+zmConfig.viewerId+".emotion",true);if(zm.objectLength(h)>0){k.unshift({id:0,name:"Yêu thích",items:h})}for(var y=0;y<k.length;y++){var A=k[y],z=new Array();w.push({id:A.id,name:A.name});for(var v=0;v<A.items.length;v++){var g;B=A.items[v];B.desc=B.desc.charAt(0).toUpperCase()+B.desc.slice(1);m='<img class="zmpemo" alt="" title="'+B.desc+'" src="http://emo.me.zdn.vn/emo/'+B.url+'" />';g=B.sign.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");z["e"+B.id]={id:B.id,desc:B.desc,code:g,sign:B.sign,src:m,ourl:B.url,url:"http://emo.me.zdn.vn/emo/"+B.url}}y==0&&b(z,A.id);p["emotion."+A.id]=z}c(w,"emotion");var l=zm.storage.get("emofav."+zmConfig.viewerId+".sticker",true),u=false;if(zm.objectLength(l)>0){q.unshift({id:0,name:"Yêu thích",items:l,enable:true})}for(y=0;y<q.length;y++){var t=q[y],x=new Array();if(!t.enable){continue}C.push({id:t.id,name:t.name});for(v=0;v<t.items.length;v++){B=t.items[v];B.desc=B.desc.charAt(0).toUpperCase()+B.desc.slice(1);m='<img class="zmpstk" width="55" height="55" alt="" title="'+B.desc+'" src="http://emo.me.zdn.vn/sticker/'+B.url+'" />';x["s"+B.id]={desc:B.desc,code:B.id,src:m,ourl:B.url,url:"http://emo.me.zdn.vn/sticker/"+B.url}}if(!u){e(x);u=true}p["sticker."+t.id]=x}c(C,"sticker");zm.plugins.emotions.cached=p}zm("#zme-emotion-box").clickOutside(function(){if(zm.plugins.emotions.show){zm.plugins.emotions.close()}}).mouseup(function(i){i.stopPropagation()});zm("#emotionclose").click(function(){zm.plugins.emotions.close();return false});zm(".tabemotion li a").click(function(){if(zm(this).hasClass("current")){return false}var i=zm(this).attr("rel");zm(".tabemoctn").hide();zm(".tab_"+i).show();zm(".tabemotion li a").removeClass("current");zm(this).addClass("current");var j=zm.plugins.emotions.button;zm.plugins.emotions.setPosition(j);return false});var n='<div id="zme-sticker-box" class="ctndisbox" style="display: none">									<span id="emoarrowtop" class="icodisbox emoarrtop"></span>									<div class="disbox">										<div class="zme-sticker-ctn">										</div>										<div class="clr"></div>									</div>									<span id="emoarrowbot" class="icodisbox emoarrbot"></span>								</div>';zm("body").append(n);zm.plugins.emotions.hoverSticker()})}});zm.install("autoresize",{autoResize:function(b){if(!zm.plugins.autoresize.initialized){zm.plugins.autoresize.init();zm.plugins.autoresize.initialized=true}for(var c=0,d;d=this[c];c++){if(!zm.data(d,"autoresize.height")){zm.data(d,"autoresize.height",zm(d).height())}}var a=function(){zm.plugins.autoresize.resizing=this;if(zm.plugins.autoresize.timer){clearTimeout(zm.plugins.autoresize.timer)}zm.plugins.autoresize.timer=setTimeout(function(){var l=zm.plugins.autoresize.resizing;if(zm.data(l,"autoresize.stop")){return}var s=zm(l),p=s.width();if(p<=0){return}var f,r=zm.plugins.autoresize.styles,m=zm("#zmjs-text-resize"),n=zm.data(l,"autoresize.height"),q=s.val()+"&";for(f=0;f<r.length;f++){m.css(r[f],s.css(r[f]))}m.css("width",p+"px");var o=zm.data(l,"autoresize.lineheight");if(!o){m.text("&");o=m.height();zm.data(l,"autoresize.lineheight",o)}if(zm.browser.msie&&zm.browser.version>8){m[0].innerText=q}else{m.text(q)}var g=m.height();if(g<=n){g=n}else{g+=o}var k;if(b&&zm.isFunction(b.onresize)){var j=s.height();if(g!=j){k=b.onresize.call(l,g,j)}}k!==false&&s.css("height",g+"px")},50)};this.change(a).keydown(a).keyup(a).focus(a);return this}},function(){zm.plugins.autoresize.init=function(){var a=["font-family","font-size","font-weight","line-height","text-decoration","letter-spacing","word-spacing","text-indent"];zm.plugins.autoresize.styles=a;zm.ready(function(){var b=zm.createElement("DIV",{id:"zmjs-text-resize"},{padding:0,margin:0,border:0,wordWrap:"break-word",position:"absolute",left:"-9999px",top:"-9999px"});if(zm.browser.msie&&zm.browser.version<9){zm(b).css("_whiteSpace","pre-wrap")}else{zm(b).css("whiteSpace","pre-wrap")}document.body.appendChild(b)})}});zm.install("boxy",{},function(){zm.plugins.boxy.defOptions={noTitle:false,title:"",content:"",closeButton:true,footer:true,modal:true,okButton:"Đồng ý",cancelButton:"",center:true,animated:true,scroll:true,revert:false};zm.plugins.boxy.zIndex=1001;zm.plugins.boxy.activeInstances=new Array();zm.Boxy=function(t){var w,E,F,A,D,f,n,o,O,i,C,P=zm.extend({},zm.plugins.boxy.defOptions,t),j=this,T=false,e=null,z=null,g=false,L,J,d,c,H,G;p();y(P.zIndex);P.isTop&&k();function p(){var Y=zm.createElement("DIV",{"class":"zme-boxy"}),W=zm.createElement("DIV",{"class":"zme-boxy-wrapper"+(P.modal?" zme-boxy-modal":"")},{display:"none"}),X=P.contentClass?(" "+P.contentClass):"",V=P.titleClass?(" "+P.titleClass):"";D=zm.createElement("DIV",{"class":"zme-boxy-body"});F=zm.createElement("DIV",{"class":"zme-boxy-container"+X});A=zm.createElement("DIV",{"class":"zme-boxy-title"+V});n=zm.createElement("DIV",{"class":"zme-boxy-content"});u(P.title);K(P.header);h(P.content);F.appendChild(A);D.appendChild(n);if(P.footer){o=zm.createElement("DIV",{"class":"zme-boxy-footer"});D.appendChild(o);P.okButton&&q();P.cancelButton&&v()}F.appendChild(D);Y.appendChild(F);W.appendChild(Y);document.body.appendChild(W);P.closeButton&&R();!(zm.browser.msie&&zm.browser.version<7)&&N();w=zm(Y);E=zm(W)}function q(){if(o){O=zm.createElement("A",{"class":"btn_L3",tabIndex:"0",href:"#"});r(0);zm(O).click(function(){j.close(true);return false}).html("<em>"+P.okButton+"</em>");o.appendChild(O)}}function v(){if(o){i=zm.createElement("A",{"class":"btn_L5",tabIndex:"0",href:"#"});r(1);zm(i).click(function(){j.close(false);return false}).html("<em>"+P.cancelButton+"</em>");P.revert?o.insertBefore(i,O):o.appendChild(i)}}function R(){C=zm.createElement("A",{"class":"zme-boxy-close",href:"#"});r(2);F.appendChild(C);zm(C).click(function(){j.close("close");return false})}function r(X){var V="",W;if(X==0){if(P.okClass){V=P.okClass}else{V="btn_L3"}W=O}else{if(X==1){if(P.cancelClass){V=P.cancelClass}else{V="btn_L5"}W=i}else{if(X==2){if(P.closeClass){V=P.closeClass}else{V="zme-boxy-close"}W=C}}}W&&zm(W).attr("class",V)}function N(){zm(A).mousedown(U);zm.browser.msie&&zm(A).bind("selectstart",function(){return false});zm(document).mousemove(x).mouseup(B);this.moved=false}function k(V){if(V!=undefined){P.isTop=V}if(P.isTop){if(!j.stopOutside){j.stopOutside=function(W){B();P.isTop&&!zm.ScrollableUI.draggingObj&&W.stopPropagation()};w.mouseup(j.stopOutside)}}else{j.stopOutside&&w.unbind("mouseup",j.stopOutside)}}function u(V){if(V){P.title=V}if(P.title){zm(A).html(P.title).show()}else{zm(A).hide()}}function K(V){if(V){P.header=V}if(!f&&!P.header){return}if(P.header){if(!f){f=zm.createElement("DIV",{"class":"zme-boxy-header"});zm(f).html(P.header);zm(D).prepend(f)}else{zm(f).html(P.header).show()}}else{if(f){zm(f).hide()}}}function h(V){if(V){P.content=V}if(n&&P.content){var W=P.content;if(zm.isString(W)){zm(n).html(W)}else{zm(n).html("").append(W)}}}function S(){if(P.footer){if(!o){o=zm.createElement("DIV",{"class":"zme-boxy-footer"});D.appendChild(o)}else{zm(o).show()}}else{o&&zm(o).hide()}}function Q(){if(P.okButton){O?zm(O).html("<em>"+P.okButton+"</em>").show():q()}else{if(P.okButton===false&&O){zm(O).hide()}}}function M(){if(P.cancelButton){i?zm(i).html("<em>"+P.cancelButton+"</em>").show():v()}else{if(P.cancelButton===false&&i){zm(i).hide()}}}function m(){if(P.closeButton){C?zm(C).show():R()}else{C&&zm(C).hide()}}function y(V){if(V&&typeof V=="number"){P.zIndex=V}P.zIndex&&E.css("z-index",zm.plugins.boxy.zIndex+P.zIndex)}function l(){E[P.modal?"addClass":"removeClass"]("zme-boxy-modal")}function s(){if(A&&zm.isString(P.titleClass)){zm(A).attr("class","zme-boxy-title "+P.titleClass)}var V=P.contentClass;if(zm.isString(V)){zm(F).attr("class","zme-boxy-container "+V)}if(zm.isString(P.okClass)){r(0)}if(zm.isString(P.cancelClass)){r(1)}if(zm.isString(P.closeClass)){r(2)}}function I(){zm.isFunction(P.beforeShow)&&P.beforeShow.call(j);E.show();T=true;j.locate();if(P.okButton&&P.autoFocus!=false){try{O&&zm(O).focus()}catch(V){}}if(zm.inArray(j,zm.plugins.boxy.activeInstances)==-1){zm.plugins.boxy.activeInstances.push(j)}}function U(W){g=true;var X=zm(this).offset(true);L=X.left;J=X.top;var V=zm.Boxy.mousePosition(W);d=V.left;c=V.top;return false}function x(X){if(g){j.moved=true;var V=zm.Boxy.mousePosition(X),W=zm.getViewport();if(zm.browser.msie){H=V.left-d+L-8-W.offsetX;G=V.top-c+J-8-W.offsetY}else{H=V.left-d+L-W.offsetX-8;G=V.top-c+J-W.offsetY-8}j.moveTo(H,G,false)}}function B(){g=false;j.moved=false}this.centerX=function(){var W,V=w.outerWidth(),X=zm.getViewport();W=Math.round((X.width-V)/2);if(zm.isNumber(P.offsetLeft)){W+=P.offsetLeft}w.css("left",(W<0?"0":W)+"px")};this.centerY=function(){var W,X=w.outerHeight(),V=zm.getViewport();if(e==null){e=V.height}W=Math.round((e-X)/2);if(z!=null){W+=z-P.iframeTopOffset}if(zm.isNumber(P.offsetTop)){W+=P.offsetTop}w.css("top",(W<0?"0":W)+"px");e=null};this.center=function(){this.centerX();this.centerY()};this.locate=function(){if(this.moved){return}if(zm.isFunction(P.setPosition)){P.setPosition.call(this)}else{P.center&&this.center()}};this.moveTo=function(V,X,W){this.moveToX(V,W);this.moveToY(X,W)};this.moveToX=function(V,W){if(V!=undefined){if(V=="center"){this.centerX()}else{w.css("left",V+"px")}}};this.moveToY=function(W,V){if(W!=undefined){if(W=="center"){this.centerY()}else{if(z!=null&&V!=false){W+=z-P.iframeTopOffset}w.css("top",W+"px")}}};this.show=function(){if(T){return}if(typeof zmXCall!="undefined"&&typeof P.iframeTopOffset=="number"){zmXCall.getTop(function(V){e=V.height;z=V.top;I()})}else{e=z=null;I()}};this.hide=function(W){if(!T){return}zm.isFunction(P.beforeHide)&&P.beforeHide();var X=P.afterHide;if(W!==false&&P.animated){if(zm.browser.msie){E.hide();zm.isFunction(X)&&X()}else{E.fadeOut(100,X)}}else{E.hide();zm.isFunction(X)&&X()}T=false;if(this==zm.plugins.boxy.alertInstance&&zm.plugins.boxy.alertTimeout){clearTimeout(zm.plugins.boxy.alertTimeout)}var V=zm.inArray(this,zm.plugins.boxy.activeInstances);V>-1&&zm.plugins.boxy.activeInstances.splice(V,1)};this.isShowing=function(){return T};this.getElement=function(){return w[0]};this.setTitle=function(V){u(V);return this};this.setHeader=function(V){K(V);return this};this.setContent=function(V){h(V);this.locate();return this};this.close=function(W){var V=true;if(W==="close"){zm.isFunction(P.onClose)&&P.onClose.call(this)}else{if(W){if(zm.isFunction(P.onOk)){V=P.onOk.call(this)}}else{if(zm.isFunction(P.onCancel)){V=P.onCancel.call(this)}}}V!==false&&this.hide()};this.changeSettings=function(V){if(!V){return}if(!P){P=zm.plugins.boxy.defOptions}P=zm.extend(P,V);zm.isString(V.title)&&u();zm.isString(V.header)&&K();zm.isString(V.content)&&h();l();S();Q();M();m();y();k();s()};this.getSettings=function(){return P}};function b(){var e=zm.plugins.boxy.activeInstances;for(var d=0,c;c=e[d];d++){c.locate()}}function a(){var e=zm.plugins.boxy.activeInstances;for(var d=e.length-1;d>=0;d--){var c=e[d];if(c.getSettings().hideOnClickOutside&&zm.inArray(c.getElement(),zm(this).parents())==-1){c.close("close");break}}}zm.ready(function(){var c=zm(window);c.resize(b);if(zm.browser.msie&&zm.browser.version<7){c.scroll(b)}zm(document.body).mouseup(a).keydown(function(f){if(f.keyCode==27){var d=zm.plugins.boxy.activeInstances;d&&d.length>0&&d[d.length-1].close("close")}})});zm.extend(zm.Boxy,{alert:function(e,h,g,c){var f;if(zm.plugins.boxy.alertInstance){f=zm.plugins.boxy.alertInstance}else{f=new zm.Boxy({zIndex:100});zm.plugins.boxy.alertInstance=f}var d={contentClass:"lbx_widsml",isTop:false};zm.extend(d,c,{content:e,title:h});f.changeSettings(d);f.show();if(g){zm.plugins.boxy.alertTimeout=setTimeout(function(){f.hide()},g)}},stopAlert:function(){zm.plugins.boxy.alertInstance&&zm.plugins.boxy.alertInstance.hide()},confirm:function(e,g,c){var f=zm.plugins.boxy.confirmInstance;if(!f){f=new zm.Boxy({zIndex:99});zm.plugins.boxy.confirmInstance=f}var d={contentClass:"lbx_widsml",isTop:false};zm.extend(d,c,{content:e,onOk:g});f.changeSettings(d);f.show()},stopConfirm:function(c){zm.plugins.boxy.confirmInstance&&zm.plugins.boxy.confirmInstance.hide(c)},mousePosition:function(d){if(d.pageX||d.pageY){return{left:d.pageX,top:d.pageY}}else{var c=document.documentElement||document.body;return{left:(d.clientX+c.scrollLeft-c.clientLeft),top:(d.clientY+c.scrollTop-c.clientTop)}}}})});zm.install("dragdrop",{startDragDrop:function(i){if(!this[0]){return}var h=this[0];if(zm.data(h,"dragdrop.start")==true){return}zm.data(h,"dragdrop.start",true);var d=0,f,a,b,c=null,e={};this.children().each(function(){zm.data(this,"dragdrop.index",d);d++});f=function(){var j=this;if(j){while(j.parentNode!=h){j=j.parentNode;if(!j){return false}}c=j;zm(c).addClass("zme-dragging");i&&zm.isFunction(i.onDragging)&&i.onDragging.call(c)}return false};a=function(n){if(c){var m=this;while(m.parentNode!=h){m=m.parentNode;if(!m){return}}if(m!=c){var l=zm(h).children(),j=zm.inArray(c,l);for(var k=0,o;o=l[k];k++){if(o==m){if(k==l.size()-1){h.appendChild(c)}else{if(k>j){h.insertBefore(o,c)}else{h.insertBefore(c,o)}}break}}}if(zm.browser.msie&&n.button==0){if(m!=h){zm(c).removeClass("zme-dragging");i&&zm.isFunction(i.onStopDragging)&&i.onStopDragging.call(c);c=null}}}};b=function(){if(c){zm(c).removeClass("zme-dragging");i&&zm.isFunction(i.onStopDragging)&&i.onStopDragging.call(c)}c=null};e.mousedown=[this.mousedown(f),f];e.mousemove=[zm(document).mousemove(a),a];e.mouseup=[zm(document).mouseup(b),b];if(zm.browser.msie&&typeof h.onselectstart!="undefined"){var g=function(){return zm.data(h,"dragdrop.start")!=true};e.selectstart=[this.bind("selectstart",g),g]}zm.data(h,"dragdrop.events",e)},stopDragDrop:function(){var a=zm.data(this[0],"dragdrop.events");zm.each(a,function(c){this[0].unbind(c,this[1])});zm.removeData(this[0],"dragdrop.events");var b=this.getDragDropResult();zm.removeData(this[0],"dragdrop.start");return b},getDragDropResult:function(){if(zm.data(this[0],"dragdrop.start")){var b=new Array();for(var a=0,e;e=this.children()[a];a++){var d=zm.data(e,"dragdrop.index");b.push(d)}return b}return null}});zm.install("popup",{calloutPopup:function(f){if(!zm.plugins.popup.initialized){zm.plugins.popup.init();zm.plugins.popup.initialized=true}var d=zm("#zme-callout-popup-content"),b=zm("#zme-callout-popup");d.html("").append(f);var i=this.offset(true),a=zm.getViewport(),e=this.height(),c=i.top+e/2;i.left+=zm.intval(this.css("padding-left"))+zm.intval(this.css("margin-left"));if(a.offsetY+a.height/2<=c){d.attr("class","zme-callout-content-upper");zm("#zme-callout-popup-head").hide();zm("#zme-callout-popup-bottom").css("padding-left","12px").show();b.css("top",(i.top-b.outerHeight())+"px")}else{d.attr("class","zme-callout-content-lower");zm("#zme-callout-popup-bottom").hide();zm("#zme-callout-popup-head").css("padding-left","12px").show();b.css("top",(i.top+e)+"px")}var j=b.outerWidth(),g=i.left+j+15;if(a.offsetX+a.width>g){b.css("left",i.left+"px")}else{b.css("left",(i.left+this.width()-j)+"px");if(a.offsetY+a.height/2<=c){zm("#zme-callout-popup-bottom").css("padding-left",(b.width()-24)+"px")}else{zm("#zme-callout-popup-head").css("padding-left",(b.width()-24)+"px")}}},hideCalloutPopup:function(){zm("#zme-callout-popup").css({left:"-9999px",top:"0px"})}},function(){zm.plugins.popup.init=function(){zm.ready(function(){var b=zm.createElement("DIV",{id:"zme-callout-popup"}),f=zm.createElement("DIV",{id:"zme-callout-popup-content"}),e=zm.createElement("DIV",{id:"zme-callout-popup-head"}),d=zm.createElement("DIV",{id:"zme-callout-popup-bottom"}),c=zm.createElement("DIV",{"class":"zme-callout-arrow"}),a=zm.createElement("DIV",{"class":"zme-callout-arrow"});e.appendChild(c);d.appendChild(a);b.appendChild(e);b.appendChild(f);b.appendChild(d);document.body.appendChild(b)})}});zm.install("tooltip",{showTip:function(c,i){if(this.size()==0){return}zm.plugins.tooltip.init();zm("#zmtipctn").html(c);i=zm.extend({},zm.plugins.tooltip.defOptions,i);var h=zm("#zmtip"),e,b,f=this.offset(true),d=i.position;h.attr("class","tip_outer "+i.tipClass);i.width&&h.css("width",i.width+"px");if(d.indexOf("bot")==0){e=f.top-h.outerHeight()-5}else{e=f.top+this.outerHeight()+5}var g=h.outerWidth(),a=this.outerWidth();if(d.substr(3)=="left"){b=f.left+5}else{if(d.substr(3)=="right"){b=f.left+a-g-5}else{b=f.left+Math.floor((a-g)/2)}}zm.plugins.tooltip._setArrow(d);e+=i.offsetTop;b+=i.offsetLeft;zm.plugins.tooltip._show(e,b,i)},hideTip:function(){zm.hideTip()}},function(){zm.plugins.tooltip.init=function(){if(zm("#zmtip").size()>0){return}zm.ready(function(){var a=zm.createElement("DIV",{id:"zmtip","class":"tip_outer"},{top:"-9999px",left:"0px"});zm(a).html('<div class="tip_box">				<span id="zmtiparrow" class="tip_arrow skin"></span>				<a id="zmtipclose" href="#" class="tip_close" title="Đóng" style="display: none" onclick="zm.hideTip(); return false;">Đóng</a>				<div class="tip_inner">					<div id="zmtipctn"></div>				</div>            </div>');document.body.appendChild(a)})};zm.plugins.tooltip.defOptions={position:"topcenter",tipClass:"",close:false,offsetTop:0,offsetLeft:0};zm.showTip=function(d,c){if(!c&&!c.inElement){return}zm.plugins.tooltip.init();c=zm.extend({},zm.plugins.tooltip.defOptions,c);var a=zm("#zmtip"),g=c.position,f=c.top,e=c.left;a.attr("class","tip_outer "+c.tipClass);c.width&&a.css("width",c.width+"px");zm("#zmtipctn").html(d);zm(c.inElement).append(a);zm.plugins.tooltip._setArrow(g);var b=zm("#zmtip").outerWidth();if(!c.absLeft){if(g.substr(3)=="right"){e-=b+5}else{if(g.substr(3)!="left"){e-=Math.floor(b/2)}}}zm.plugins.tooltip._show(f,e,c)};zm.hideTip=function(){if(zm.plugins.tooltip.showing){var a=zm("#zmtip");if(zm.browser.msie){a.remove();zm.isFunction(zm.plugins.tooltip.afterHide)&&zm.plugins.tooltip.afterHide();zm.plugins.tooltip.afterHide=null}else{a.fadeOut(function(){this.remove();zm.isFunction(zm.plugins.tooltip.afterHide)&&zm.plugins.tooltip.afterHide();zm.plugins.tooltip.afterHide=null})}zm.plugins.tooltip.showing=false}};zm.plugins.tooltip._show=function(e,d,b){zm("#zmtipclose")[b.close?"show":"hide"]();var a;if(typeof b.timeout=="number"){a=function(){setTimeout(function(){zm.hideTip()},b.timeout)}}zm.plugins.tooltip.afterHide=b.afterHide;var c=zm("#zmtip");c.css({top:e+"px",left:d+"px"});if(zm.browser.msie){a&&a()}else{c.fadeIn(a)}zm.plugins.tooltip.showing=true};zm.plugins.tooltip._setArrow=function(c){var a=Math.floor((zm("#zmtip").outerWidth()-20-13)/2),b="";if(c.substr(3)=="left"){b=-a+"px"}else{if(c.substr(3)=="right"){b=a+"px"}}zm("#zmtiparrow").css("left",b)}});zm.install("displaybox",{showDisplaybox:function(f,j){if(this.size()==0){return}var h=true,g=(j&&j.followElement&&zm(j.followElement))||this;g.parents().each(function(){if(zm(this).css("display")=="none"){h=false;return false}});if(!h){return}zm.plugins.displaybox.init();j=zm.extend({},zm.plugins.displaybox.defOptions,j);j.header&&zm("#zmtdbox .dboxheader").html(j.header);j.footer&&zm("#zmtdbox .dboxfooter").html(j.footer);zm("#zmtdbox .dboxcontent").html(f);var d,a,b=this;if(j.checkImage){d=zm("#zmtdbox img");if(j.ignoreImages){a=zm(j.ignoreImages)}var c=0,i=function(){if(zm(this).parents("body").size()==0){return}c++;if(c==d.size()){zm.plugins.displaybox.show(b,g,j)}}}if(d&&d.size()>0){d.each(function(){if(a&&zm.inArray(this,a)>-1){return}if(this.complete){i.call(this)}else{this.onload=this.onerror=i}})}else{if(j.delay){if(zm.plugins.displaybox.timeout){clearTimeout(zm.plugins.displaybox.timeout)}zm.plugins.displaybox.timeout=setTimeout(function(){zm.plugins.displaybox.show(b,g,j)},j.delay)}else{zm.plugins.displaybox.show(this,g,j)}}this.clickOutside(function(){var k=this;setTimeout(function(){zm.plugins.displaybox.element==k&&zm(k).hideDisplaybox()},150)},0,true,j.group||"zmcog.displaybox");this.clickOutsideWith(zm("#zmdbox"))},hideDisplaybox:function(){var a=zm.plugins.displaybox.beforHide;zm.isFunction(a)&&a.call(zm.plugins.displaybox.element);zm("#zmdbox").css({top:"-9999px",left:"-9999px"});zm.plugins.displaybox.showing=false;zm.plugins.displaybox.element=null},toggleDisplaybox:function(b,a){if(zm.plugins.displaybox.showing&&zm.plugins.displaybox.element==this[0]){this.hideDisplaybox()}else{this.showDisplaybox(b,a)}}},function(){zm.plugins.displaybox.init=function(){if(zm("#zmdbox").size()>0){return}zm.ready(function(){var b=zm.createElement("DIV",{id:"zmdbox","class":"ctndisbox",tabindex:"-1"},{top:"-9999px",left:"-9999px",outline:"none"}),c=zm.createElement("DIV",{id:"zmtdbox","class":"ctndisbox"},{top:"-9999px",left:"-9999px"}),a='<span id="zm{ID}dboxtoparrow" class="icodisbox"></span>					<div class="disbox">						<a id="zm{ID}dboxclose" href="#" class="disboxclose" title="Đóng" style="display: none">Đóng</a>						<div class="contdisbox">							<div class="disbox_inner">								<div id="zm{ID}dboxwrap"><div class="dboxheader"></div><div class="dboxcontent"></div><div class="dboxfooter"></div></div>								<div class="clr"></div>							</div>						</div>					</div>					<span id="zm{ID}dboxbotarrow" class="icodisbox"></span>';zm(b).append(a.replace(/\{ID\}/g,""));zm(c).append(a.replace(/\{ID\}/g,"t"));document.body.appendChild(b);document.body.appendChild(c);zm.plugins.displaybox.scrollUI=new zm.ScrollableUI().init().appendTo(zm("#zmdboxwrap .dboxcontent"));zm("#zmdboxclose").click(function(){var d=zm.plugins.displaybox.element;d&&zm(d).hideDisplaybox();return false})})};zm.plugins.displaybox.defOptions={position:"absolute",close:true,dboxClass:"",offsetTop:0,offsetLeft:0,checkImage:true};zm.plugins.displaybox.show=function(A,a,d){zm.isFunction(d.beforeShow)&&d.beforeShow.call(A);var j=zm("#zmdbox"),n=zm("#zmtdbox"),v="ctndisbox "+d.dboxClass,B="contdisbox",w=d.position||"absolute",f=a.offset(w=="absolute"),r=A.outerHeight(),s=Math.floor(r/2),x=zm.getViewport(),z=w=="absolute"?x.offfsetY:0,u="icodisbox ",c="top",y="bot",q,e,p,m;n.attr("class",v);if(d.noPad){B="contdisboxnopad"}n.children(".disbox").children("div").attr("class",B);j.children(".disbox").children("div").attr("class",B);var b=n.outerHeight(true),C=n.outerWidth(true),l=d.minTop||20,i=d.minBottom||20,k=n.find(".dboxcontent").outerHeight(),h=x.height-b-l-i;var g=d.valign;if(g){if(g=="bottom"||(g==true&&f.left-x.offsetY>(x.height-r)/2)){q=f.top+r+8;c="top";y="bot";u+="top"}else{if(g=="top"){q=f.top-r-8;c="bot";y="top";u+="bot"}}e=f.left+(A.outerWidth()-C-7)/2;u+="left";p={"margin-top":"","margin-left":(d.margin||(C-5)/2)+"px"}}else{if(d.align!="right"&&f.left-x.offsetX>C){e=f.left-C-5;u+="lefttop"}else{e=f.left+A.outerWidth()+5;u+="righttop"}if(f.top<l+z){q=l+z}else{q=f.top}if(h<0){q=l+z;k+=h}else{if(s<12){q+=s-12}if((m=q+b+i-z-x.height)>0){q-=m}}var o=f.top-q+s-6;if(o<4){o=f.top+r-q-14}if(s<12){o=""}else{o+="px"}p={"margin-left":"","margin-top":o}}zm("#zmdbox"+c+"arrow").attr("class",u).css(p).show();zm("#zmdbox"+y+"arrow").hide();q+=d.offsetTop;e+=d.offsetLeft;j.attr("class",v);zm("#zmdbox .dboxheader").empty().append(zm("#zmtdbox .dboxheader").children());zm("#zmdbox .dboxfooter").empty().append(zm("#zmtdbox .dboxfooter").children());zm.plugins.displaybox.scrollUI.setContent(zm("#zmtdbox .dboxcontent").children()).setHeight(k+1).updateScrollbar(false);zm.plugins.displaybox.scrollUI.setWidth(d.width||"");zm("#zmdboxclose")[d.close?"show":"hide"]();j.css({top:q+"px",left:e+"px",position:d.position});zm.plugins.displaybox.showing=true;zm.plugins.displaybox.element=A[0];zm.plugins.displaybox.beforHide=d.beforeHide;zm.isFunction(d.afterShow)&&d.afterShow.call(A)}});zm.install("scrollableui",{},function(){zm.ScrollableUI=function(c){var m=zm.extend({},zm.ScrollableUI.defaultSettings,c),t,v,b=false,w=false,n,f=zm.extend({"class":"zmscrollableui"+(m.uiClass?" "+m.uiClass:"")},m.uiAttrs),l=zm.extend({},m.uiStyles),o=zm.createElement("DIV",f,l),g=zm.createElement("DIV",{"class":"zmscrollableui_wrapper"+(m.wrapperClass?" "+m.wrapperClass:""),tabindex:"0"}),k=zm.createElement("DIV",{"class":"zmscrollableui_body"+(m.bodyClass?" "+m.bodyClass:"")}),q=zm.createElement("DIV",{"class":"zmscrollableui_content"+(m.contentClass?" "+m.contentClass:"")}),a=zm.createElement("DIV",{"class":"zmscrollableui_bar"+(m.scrollbarClass?" "+m.scrollbarClass:"")},{visibility:"hidden"}),d=zm.createElement("DIV",{"class":"zmscrollableui_gripper"+(m.gripperClass?" "+m.gripperClass:"")});o.appendChild(g);o.appendChild(a);g.appendChild(k);a.appendChild(d);k.appendChild(q);m.content&&zm(q).append(m.content);var i=zm(o);if(m.width){i.css("width",m.width+"px");zm(k).css("width",m.width+"px")}m.height&&i.css({height:m.height+"px"});m.max_height&&i.css({"max-height":m.max_height+"px"});m.max_height&&zm(g).css({"max-height":m.max_height+"px"});function r(s){zm(k).hover(function(){zm.ScrollableUI.scrollingElement=g;h();p(true);!s.settings.alwaysShow&&e()},function(){h();if(!s.settings.alwaysShow){var x=zm.ScrollableUI.draggingElement;if(!x||x.parentNode.parentNode!=this){t=setTimeout(e,500)}}if(zm.ScrollableUI.scrollingElement==g){zm.ScrollableUI.scrollingElement=null}u()});zm(o).mousemove(function(x){var y=zm(o);if(zm.Boxy.mousePosition(x).left-y.left()>=y.width()-30){w=true;u();p(true)}else{w=false;!s.settings.alwaysShow&&e()}});zm(g).scroll(function(A){if(v){clearTimeout(v)}var z=this.scrollTop,y=0;if(z==0){y=-1}else{if(z+this.offsetHeight==this.scrollHeight){y=1}}p(true);!s.settings.alwaysShow&&!w&&e();var x=s.settings.onscroll;zm.isFunction(x)&&x.call(this,s,A,y)});zm(a).hover(function(){u()},function(){!s.settings.alwaysShow&&!s.mousedown&&e()});zm(d).mousedown(function(x){zm.ScrollableUI.scrollingElement=g;u();s.mousedown=true;s.offsetY=zm.Boxy.mousePosition(x).top-zm(this).top();zm.ScrollableUI.draggingObj=s;return false});if(zm.browser.msie){zm(a).bind("selectstart",function(){return false});zm(o).bind("selectstart",function(){return !s.mousedown})}}function p(s,C){var D=g.offsetHeight,y=g.scrollHeight;if(D==y){j(C);return}var B=zm(a).show(),x=a.offsetHeight,z=x*D/y,A=zm(d);if(z>4){z-=4}A.css("height",z+"px");setTimeout(function(){z=A.outerHeight();var G=g.scrollTop,F,E=y-D;if(G>=E){F=x-z}else{F=(x-z)/E*G}A.css("top",F+"px");b=true;s&&!n&&B.stopFading().css("visibility","").opacity(1)},50)}function e(){if(!b){return}if(v){clearTimeout(v)}v=setTimeout(function(){j()},1000)}function j(s){var x=zm(a);if(!b){return}if(s===false){x.hide()}else{x.fadeOut(function(){this.css("visibility","hidden");var y=this;b=false;setTimeout(function(){y.show()},100)})}}function u(){if(v){clearTimeout(v)}v=null}function h(){if(t){clearTimeout(t)}t=null}r(this);this.settings=m;this.init=function(){return this};this.appendTo=function(s){if(s.append){s.append(o)}else{s.appendChild(o)}this.init();return this};this.setContent=function(s){if(zm.isString(s)){zm(q).html(s)}else{zm(q).empty().append(s)}return this};this.setWidth=function(x){var s=x;if(zm.isNumber(x)){s+="px"}this.width=zm.intval(x);zm(o).css("width",s);zm(k).css("width",s);return this};this.getWidth=function(){return this.width};this.setHeight=function(x){var s=x;if(zm.isNumber(x)){s+="px"}this.height=zm.intval(x);zm(o).css("height",s);return this};this.getHeight=function(){return this.height};this.autoHeight=function(s){var x=k.scrollHeight;if(x>s||s==""){x=s}else{j(false)}this.setHeight(x);return this};this.getElement=function(){return o};this.getGripper=function(){return d};this.updateScrollbar=function(s){p(true,s);return this};this.scrollTo=function(s,A,z){if(g.scrollTop!=s){n=!z;g.scrollTop=s;setTimeout(function(){n=false},100)}return this};this.scrollToEnd=function(s){return this.scrollTo(g.scrollHeight,null,s)};this.scrollToTop=function(s){return this.scrollTo(0,null,s)};this.scrollTop=function(s){if(s==undefined){return g.scrollTop}g.scrollTop=s;return this};this.scrollLeft=function(s){if(s==undefined){return g.scrollLeft}g.scrollLeft=s;return this};this.showScrollbar=function(){p(true);return this};this.hideScrollbar=function(s){u();h();j(s);return this};this.show=function(){zm(o).show();return this};this.hide=function(){zm(o).hide();return this};this.clear=function(){zm(q).empty();return this};this.remove=function(){zm(o).remove()}};zm(document).mousemove(function(f){var c=zm.ScrollableUI.draggingObj;if(c){var j=zm.Boxy.mousePosition(f).top,l=c.getGripper(),d=zm(l),m=d.outerHeight(),h=d.parent(),a=h.height(),i=j-h.top()-(c.offsetY||0),b=i<=0||i>=a-m;if(i<0){i=0}if(i>a-m){i=a-m}var k=h.parent().children().get(0)[0];if(!zm.browser.msie){k.scrollTop+=1;k.scrollTop-=1}if(b&&i>0){k.scrollTop=k.scrollHeight}else{k.scrollTop=zm.intval(i*(k.scrollHeight-k.offsetHeight)/(a-m))}}}).mouseup(function(){var a=zm.ScrollableUI.draggingObj;if(a){!a.settings.alwaysShow&&a.hideScrollbar(true);a.mousedown=false;a.offsetY=null;zm.ScrollableUI.draggingObj=null}});zm(document.documentElement).mousewheel(function(h){if((typeof h.axis!=="undefined"&&h.axis===h.HORIZONTAL_AXIS)||(h.wheelDeltaX&&!h.wheelDeltaY)){h.preventDefault()}else{if(zm.ScrollableUI.scrollingElement){var m=h.wheelDeltaY||h.wheelDelta||h.detail,a=zm.ScrollableUI.scrollingElement,f=a.scrollHeight,n=a.offsetHeight,l=zm(a).parents();for(var c=0,b;b=l.get(c);c++){if(b.css("display")=="none"){zm.ScrollableUI.scrollingElement=null;return}}if(f>n){var k=a.scrollTop;if(((zm.browser.firefox?m<0:m>0)&&k==0)||((zm.browser.firefox?m>0:m<0)&&k>=f-n)){h.preventDefault()}else{if(zm.browser.msie&&zm.browser.version<9){var g=zm(a).css("font-size");if(g.indexOf("px")<0){var j=zm.createElement("DIV");j.style.fontSize=g;j.style.height="1em";g=j.style.pixelHeight}else{g=parseInt(g,10)}a.scrollTop=k-Math.round(m/120*g);h.preventDefault()}}}}}});if(zm.browser.msie){zm(document).bind("selectstart",function(){var a=zm.ScrollableUI.draggingObj;if(a&&a.mousedown){return false}})}zm.ScrollableUI.defaultSettings={}});zm.install("brickbox",{autoArrangeBox:function(m){var J=this.children();if(m&&m.filterItem){J.filter(m.filterItem)}if(!J||J.size()<1){return this}if(this.data("brickbox.autoresize")!=1){zm.plugins.brickbox.elems.push({element:this,options:m});this.data("brickbox.autoresize",1)}m=zm.extend({},zm.plugins.brickbox.defSettings,m);var q=this.parent().parent(),H=q.offset().left,D=zm.intval(m.from),c=m.force||D>0;if(H<0&&!c){return this}var d=m.getMaxWidth,z=(zm.isFunction(d)&&d.call(this))||(q.width()-H-20),o=0,K=m.padding,p=m.paddingBottom||K,v=m.paddingRight||K,L=m.minColumn,n,t,a=new Array(),F,I,f,N=0;for(F=0,I;I=J.get(F);F++){var s=I.outerWidth();if(s>0){n=s+v;break}}t=Math.floor(z/n);if(t==zm.intval(this.data("brickbox.cols"))&&!c){return this}var u=m.beforeArrange;zm.isFunction(u)&&u(t,n,z);if(t<L&&!c){return this}this.data("brickbox.cols",t);if(D>0){for(F=D-1;I=J.get(F);F--){if(a.length>=t){break}if(!f){f=new Array()}var y=I.outerHeight();if(y>0){var B=zm.intval(I.css("left")),M=zm.intval(I.css("top"))+y;if(f.length==0){f.push(B);a.push(M)}else{var C=-1;for(var E=0;E<f.length;E++){if(f[E]==B){break}if(f[E]<B){if(E==f.length-1){C=E+1}continue}if(f[E]>B){C=E;break}C=0}if(C>-1){f.splice(C,0,B);a.splice(C,0,M)}}}}}for(F=D;I=J.get(F);F++){var x=0,G=I.outerHeight();if(G==0){continue}if(a.length<t){o=a.length%t*n;if(D>0&&f.length<t){f.push(o)}a.push(G)}else{var r=Math.min.apply(Math,a),A=zm.inArray(r,a);x=r+p;if(D>0&&f){o=f[A]}else{o=A*n}a[A]=x+G}I.css({top:x+"px",left:o+"px"}).attr("data-index",F);N++}this.css("height",Math.max.apply(Math,a)+"px").parent().css("width",(t*n-v)+"px");D==0&&this.data("brickbox.total",N);var g=m.afterArrange;zm.isFunction(g)&&g(t,n,z);return this},getNumberBoxColumns:function(){return this.data("brickbox.cols")},getNumberBoxes:function(){return this.data("brickbox.total")},updateTopBox:function(m){var j=this.children();if(m&&m.filterItem){j.filter(m.filterItem)}if(!j||j.size()<1){return this}m=zm.extend({},zm.plugins.brickbox.defSettings,m);var l=zm.intval(m.from),f=m.paddingBottom||m.padding,a,k;for(var b=l,g;g=j.get(b);b++){var d=g.outerHeight();if(d==0){continue}var c=zm.intval(g.css("left"));if(a===undefined){a=c}else{if(a!=c){continue}}if(k){g.css("top",(k+f)+"px")}k=zm.intval(g.css("top"))+d}if(this.height()<k){this.css("height",k+"px")}return this}},function(){zm.plugins.brickbox.defSettings={padding:10,force:false,from:0};zm.plugins.brickbox.elems=new Array();zm(window).resize(function(){for(var a=0,b;b=zm.plugins.brickbox.elems[a];a++){b.options.force=false;b.from=0;b.element.autoArrangeBox(b.options)}})});zm.install("slideshow",{slideshow:function(e){e=zm.extend({},zm.plugins.slideshow.defSettings,e);var p=this.width(),t=this.children(),f=this.children().length,o=0,i=null,s=true,h=null;var n=e.next,l=e.prev,a=e.interval,v=e.reverse,k=e.speed,b=e.circle,g=e.click_circle,m=e.callbacks,u=e.pageNavi,d=e.pageNaviCurrent,q=e.pageNaviPrefix,c=e.pageNaviSuffix;r(this);function r(y){y.children().hide();zm(t[0]).show();if(a!=0){w()}if(u&&u!=""){for(var x=0;x<f;x++){zm(u).append(q+'<a class="'+(x==0?"selected":"")+'" href="#" ref="'+x+'"></a>'+c)}zm(u).find("a").click(function(){var z=zm(this).attr("ref");j("pagenavi",z)})}if(n!=""){zm(n).click(function(){clearTimeout(h);h=setTimeout(function(){j("next")},200)})}if(l!=""){zm(l).click(function(){clearTimeout(h);h=setTimeout(function(){j("prev")},200)})}}function w(){i=setInterval(function(){j()},a)}function j(C,A){clearInterval(i);var B,y;switch(C){case"prev":s=false;B=!v;y=v?-p:p;if(!g&&o==0){return}A=o<=0?(f-1):parseInt(o)-1;break;case"next":s=false;B=v;y=v?p:-p;if(!g&&o==f-1){return}A=o>=(f-1)?0:(o+1);break;case"pagenavi":if(A<o){B=!v;y=v?-p:p}else{if(A>o){B=v;y=v?p:-p}}if(A==o){return}break;default:B=v;y=v?p:-p;if(!b&&o==f-1){return}A=o>=(f-1)?0:(o+1);break}var x=zm(t[o]),z=zm(t[A]);z.show().css("left",y+"px");x.slide({direction:true,reverse:B,duration:k,callback:function(){this.css({margin:"0",left:"0"}).hide()}});z.slide({direction:true,reverse:B,duration:k,callback:function(){this.css({margin:"0",left:"0"}).show();zmCore.isFunction(m)&&m.call(this,A)}});if(u&&u!=""){zm(u).find("a").removeClass(d);zm(zm(u).children()[A]).children("a").addClass(d)}o=A;if(a!=0&&s){w()}}}},function(){zm.plugins.slideshow.defSettings={prev:"",next:"",reverse:true,interval:5000,speed:400,pageNavi:"",pageNaviCurrent:"current",pageNaviPrefix:"",pageNaviSuffix:"",circle:true,click_circle:true,callbacks:null}});zm.install("lightbox",{},function(){var c,b,a=false;zm.plugins.lightbox.defSettings={onClose:null};zmCore.showLightBox=function(h,g){b=zm.extend({},zm.plugins.lightbox.defSettings,g);var f=zm.createElement("DIV",{"class":"zme-lightbox-wrapper"}),i=zm.createElement("DIV",{"class":"zme-lightbox"}),e=zm.createElement("DIV",{"class":"zme-lightbox-container"}),d=zm.createElement("DIV",{"class":"zme-lightbox-content"});zm(d).html(h);e.appendChild(d);i.appendChild(e);f.appendChild(i);document.body.appendChild(f);c=zm(f);zm(i).click(function(){if(zm(this).hasClass("zme-lightbox-content")||zm(this).parents(".zme-lightbox-content").length>0){return}zmCore.hideLightBox();zmCore.isFunction(b.onClose)&&b.onClose.call(this)})};zmCore.hideLightBox=function(){c.remove();c=null};zm.ready(function(){zm(document.body).keydown(function(d){if(d.keyCode==27&&c){zmCore.hideLightBox();zmCore.isFunction(b.onClose)&&b.onClose.call(this)}})})});zm.install("pager",{},function(){zm.plugins.pager.defSettings={display:5,total:0,onSelect:null};zm.Pager=function(i){i=zm.extend({},zm.plugins.pager.defSettings,i);var c=zm.createElement("UL",{"class":"zmui_paginator"}),b=i.display,f=i.total,d=i.onSelect,g;e();h(1);a();function e(){var n='<li><a class="pager_first" href="#" ref="1">Đầu</a></li>',m='<li><a class="pager_last" href="#" ref="'+f+'">Cuối</a></li>',l='<li><a class="pager_prev" href="#" ref=""><span></span></a></li>',k='<li><a class="pager_next" href="#" ref=""><span></span></a></li>';zm(c).html("").append(n).append(l);for(var j=1;j<=f;j++){var o='<li><a class="'+(j==1?"selected":"")+'" href="#" ref="'+j+'">'+j+"</a></li>";zm(c).append(o)}zm(c).append(k).append(m)}function h(q){g=q=parseInt(q);if(q<1||q>f){return}var n=zm(c).children("li")[q+1],r=zm(c).find(".pager_prev"),k=zm(c).find(".pager_next"),l=zm(c).find(".pager_first"),p=zm(c).find(".pager_last");zm(c).find("a.selected").removeClass("selected");zm(n).children("a").addClass("selected");r.attr("ref",q-1);k.attr("ref",q+1);if(q==1){r.addClass("dis");l.addClass("dis")}else{r.removeClass("dis");l.removeClass("dis")}if(q==f){k.addClass("dis");p.addClass("dis")}else{k.removeClass("dis");p.removeClass("dis")}zm(c).children("li").hide();f>b&&zm(c).children("li").get(0).show();f>b&&zm(c).children("li").get(f+3).show();f>1&&zm(c).children("li").get(1).show();f>1&&zm(c).children("li").get(f+2).show();var j=Math.max(0,g-1-Math.floor(b/2))+2,m=Math.min(f+2,j+b);if(m-j<b){j-=b-m+j;j=j<1?1:j}if(j==1&&m<=3){j=2;m=3}for(var o=j;o<m;o++){zm(c).children("li").get(o).show()}}function a(){zm(c).find("a").click(function(){var j=zm(this).attr("ref");if(j==null){j=zm(this).parent("a").attr("ref")}if(j==0||j>f||j==g){return false}h(j);zmCore.isFunction(d)&&d.call(this,j);return false})}this.setTotal=function(j){f=j;e();h(1);a()};this.setCurrentPage=function(j){h(j)};this.getCurrentPage=function(){return g};this.getElement=function(){return c}}});zm.install("fixedbox",{},function(){var b,d,c,a=false,g=false,e;zm.plugins.fixedbox.defSettings={title:"Xem trước",content:"",onClose:null,viewmore:null,url:""};zmCore.showFixedBox=function(h){c=zm.extend({},zm.plugins.fixedbox.defSettings,h);var o=zm.createElement("DIV",{"class":"fixedbox_overlay"}),j=zm.createElement("DIV",{"class":"fixedbox_wrapper"}),m=zm.createElement("DIV",{"class":"fixedbox_body widsml"}),t=zm.createElement("DIV",{"class":"fixedbox_top"}),u=zm.createElement("DIV",{"class":"fixedbox_title"}),k=zm.createElement("DIV",{"class":"fixedbox_close"}),i=zm.createElement("DIV",{"class":"fbxpad"}),q=zm.createElement("P",{"class":"fixedbox_titletext"}),r=zm.createElement("DIV",{"class":"fixedbox_content fbxpad"}),l=zm.createElement("DIV",{"class":"clr"});zm(k).html('<a title="Đóng" href="#"></a>');u.appendChild(k);zm(q).html(c.title);i.appendChild(q);i.appendChild(l.cloneNode(true));u.appendChild(i);u.appendChild(l);t.appendChild(u);m.appendChild(t);m.appendChild(r);j.appendChild(m);if(c.footer){var n=zm.createElement("DIV",{"class":"fixedbox_footer"}),s=zm.createElement("DIV",{"class":"fixedbox_botcont fbxpad"}),p='<a class="loadmore_link" href="javascript:;"><span><em class="l01"></em><em class="l02"></em><em class="l03"></em><em class="l04"></em><em class="l05"></em></span>Xem thêm</a>';zm(s).append(p);s.appendChild(l.cloneNode(true));n.appendChild(s);j.appendChild(n);zm(s).children(".loadmore_link").click(function(){zmCore.isFunction(c.viewmore)&&c.viewmore.call(this)})}document.body.appendChild(j);document.body.appendChild(o);b=zm(j);d=zm(o);e=zm.createElement("IFRAME",{src:"http://me.zing.vn/lkd/detail?url="+encodeURIComponent(c.url)},{width:"100%",height:""});zm(r).append(e);f();zm(window).resize(function(){f()});zm(j).click(function(){if(zm(this).hasClass("fixedbox_body")||zm(this).parents(".fixedbox_wrapper").length>0){return}zmCore.hideFixedBox()});zm(k).children("a").click(function(){zmCore.hideFixedBox();return false})};function f(){var i=zm.getViewport(),h;h=i.height-zm(".fixedbox_top").outerHeight(true);if(c.footer){h=h-zm(".fixedbox_footer").outerHeight(true)}zm(e).css("height",h+"px")}zmCore.hideFixedBox=function(){b.remove();d.remove();b=null;d=null;g=null;zmCore.isFunction(c.onClose)&&c.onClose.call(this)};zm.ready(function(){zm(document.body).keydown(function(h){if(h.keyCode==27&&b){zmCore.hideFixedBox()}})})});zm.install("slidelist",{slidelist:function(b){b=zm.extend({},zm.plugins.slidelist.defSettings,b);var m=this,j=b.next,i=b.prev,a=b.number,n=b.duration||animation.settings.duration,f=null;var p=this.children(),c=p.length-1,d=p.outerWidth(true),l=d*c,o=this.parent().width(),e=a*d;var r=0,q=animation.settings.interval,g="left",k="sin";this.parent().css("position","relative");this.css("position","absolute");this.css("top",0);this.css("left",0);this.css("width",l+"px");if(j!=""){zm(j).click(function(){clearTimeout(f);f=setTimeout(function(){h("next")},200);return false})}if(i!=""){zm(i).click(function(){clearTimeout(f);f=setTimeout(function(){h("prev")},200);return false})}function h(w,t){var u=w=="prev"?false:true,y=zmCore.intval(m.css("left")),s=u?(y-e):(y+e);if(w=="prev"&&(y+e)>=0){s=0}else{if(w=="next"&&(Math.abs(s)+o-e)>(l-e)){s=o-l}}var v=0,x=setInterval(function(){v+=q;r=animation.step[k](y,s,n,v);var z=false;if(r==-1){r=s;z=true}m.css(g,r+"px");if(z){clearInterval(x)}},q)}}},function(){zm.plugins.slidelist.defSettings={prev:"",next:"",number:5,duration:150};animation={settings:{interval:10,duration:250},css:["position","top","left","right","bottom","float","display","margin","margin-top","margin-bottom","margin-left","margin-right","background"],step:{sin:function(e,a,d,c){if(c>=d){return -1}var b=(c/d)*(Math.PI/2);return Math.floor(e+(a-e)*Math.sin(b))},linear:function(d,a,c,b){if(b>=c){return -1}return Math.floor(d+(a-d)*(b/c))},log:function(e,a,d,c){if(c>=d){return -1}var b=(c/d)*Math.E+1;return Math.floor(e+(a-e)*Math.log(b))}}}});